<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Portfolio | Andres Ramirez-Jaime</title>
    <meta name="description" content="A living photo portfolio that automatically pulls every image inside the /photos folder of this site.">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563eb',
                        secondary: '#059669',
                        dark: '#1e293b',
                        light: '#f8fafc',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.08), transparent 35%), radial-gradient(circle at 80% 0%, rgba(5, 150, 105, 0.12), transparent 40%), #f8fafc;
            color: #334155;
        }
        .nav-blur {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }
        .gradient-text {
            background: linear-gradient(to right, #2563eb, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        .gallery {
            column-count: 1;
            column-gap: 1.25rem;
        }
        @media (min-width: 768px) {
            .gallery { column-count: 2; }
        }
        @media (min-width: 1024px) {
            .gallery { column-count: 3; }
        }
        @media (min-width: 1280px) {
            .gallery { column-count: 4; }
        }
        .photo-card {
            break-inside: avoid;
            margin-bottom: 1.25rem;
        }
    </style>
</head>
<body class="antialiased selection:bg-primary/20 selection:text-primary">

    <nav class="fixed w-full z-50 nav-blur">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <a href="index.html" class="text-xl font-bold gradient-text tracking-tight">ARJ</a>
                <div class="hidden md:flex space-x-8 text-sm font-medium text-slate-600">
                    <a href="index.html" class="hover:text-primary transition">Home</a>
                    <a href="index.html#experience" class="hover:text-primary transition">Experience</a>
                    <a href="index.html#skills" class="hover:text-primary transition">Skills</a>
                    <a href="photos.html" class="text-primary font-semibold">Photos</a>
                </div>
                <a href="mailto:af.ramirez236@gmail.com" class="bg-primary text-white px-5 py-2 rounded-full text-sm font-semibold hover:bg-blue-700 transition shadow-sm hover:shadow-md">
                    Contact Me
                </a>
            </div>
        </div>
    </nav>

    <main class="pt-24 pb-12">
        <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mb-12">
            <div class="bg-white/80 border border-slate-200 rounded-3xl p-8 md:p-10 shadow-lg shadow-slate-200 relative overflow-hidden">
                <div class="absolute -right-12 -top-12 w-56 h-56 bg-blue-100 rounded-full blur-3xl opacity-60"></div>
                <div class="absolute -left-16 bottom-0 w-64 h-64 bg-emerald-100 rounded-full blur-3xl opacity-60"></div>
                <div class="relative z-10 max-w-4xl">
                    <p class="text-primary font-semibold mb-2">Welcome in</p>
                    <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4 leading-tight">Photo Portfolio</h1>
                    <p class="text-slate-600 text-lg mb-3">Welcome to my photo portfolio - a small gallery of frames that made me stop and look twice. These are some of my favorite photos I've taken over the years, from long walks, quick trips, and quiet moments in between.</p>
                    <!-- <p class="text-slate-600 text-base mb-6">Drop any new image into a <code class="font-mono bg-slate-100 px-2 py-1 rounded">/photos</code> folder in this repo; every visit auto-shuffles the wall so the story changes each time you open it.</p> -->
                    <div class="flex flex-wrap items-center gap-4">
                        <a href="index.html" class="inline-flex items-center px-5 py-3 rounded-lg bg-slate-900 text-white font-semibold hover:bg-slate-800 transition shadow-lg shadow-slate-300">
                            <i class="fas fa-arrow-left mr-2"></i> Back to main page
                        </a>
                        <button id="shuffleButton" class="inline-flex items-center px-5 py-3 rounded-lg border border-slate-200 text-slate-700 font-semibold bg-white hover:border-primary hover:text-primary transition shadow-sm">
                            <i class="fas fa-random mr-2"></i> Shuffle now
                        </button>
                        <span class="text-sm text-slate-500">Loaded photos: <span id="photoCount" class="font-semibold text-slate-700">â€“</span></span>
                    </div>
                </div>
            </div>
        </section>

        <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
            <div id="status" class="glass-card bg-white/70 border border-slate-200 rounded-2xl p-5 text-slate-600 text-sm shadow-sm flex items-center space-x-3">
                <div class="w-3 h-3 rounded-full bg-primary animate-ping"></div>
                <span>Loading photos...</span>
            </div>

            <div id="errorBox" class="hidden mt-4 bg-amber-50 border border-amber-200 text-amber-700 rounded-xl p-4 text-sm"></div>

            <div id="gallery" class="gallery mt-6 hidden"></div>
        </section>

        <div id="lightbox" class="fixed inset-0 hidden flex items-center justify-center z-50 px-4">
            <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm" data-close="true"></div>
            <div class="relative z-10 max-w-5xl w-full">
                <div class="bg-white/90 rounded-3xl overflow-hidden shadow-2xl border border-white/70">
                    <div class="flex items-center justify-between px-6 pt-6">
                        <p id="lightboxCaption" class="text-slate-800 font-semibold text-lg truncate">Photo</p>
                        <button data-close="true" aria-label="Close photo" class="text-slate-500 hover:text-slate-900 text-2xl leading-none">&times;</button>
                    </div>
                    <div class="px-6 pb-6">
                        <img id="lightboxImg" src="" alt="" class="w-full h-auto rounded-2xl object-contain max-h-[70vh] bg-slate-100">
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="py-8 bg-white border-t border-slate-200 text-center text-slate-500 text-sm">
        <p class="mb-4">Built by Andres Ramirez-Jaime &copy; 2025</p>
        <div class="flex justify-center space-x-6">
            <a href="https://github.com/Anfera" class="text-slate-400 hover:text-slate-900 transition text-xl"><i class="fab fa-github"></i></a>
            <a href="https://www.linkedin.com/in/andres-ramirez-jaime" class="text-slate-400 hover:text-blue-700 transition text-xl"><i class="fab fa-linkedin"></i></a>
            <a href="mailto:af.ramirez236@gmail.com" class="text-slate-400 hover:text-red-500 transition text-xl"><i class="fas fa-envelope"></i></a>
        </div>
    </footer>

    <script>
        const repoOwner = 'Anfera';
        const repoName = 'Anfera.github.io';
        const photosFolder = 'photos';
        const branch = 'main';
        const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${photosFolder}?ref=${branch}`;

        const statusEl = document.getElementById('status');
        const errorEl = document.getElementById('errorBox');
        const galleryEl = document.getElementById('gallery');
        const photoCountEl = document.getElementById('photoCount');
        const shuffleButton = document.getElementById('shuffleButton');
        const lightboxEl = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxCaption = document.getElementById('lightboxCaption');

        let photoCache = [];

        const isImage = (name) => /\.(png|jpe?g|gif|webp|avif)$/i.test(name);

        const shuffle = (array) => array
            .map(value => ({ value, sort: Math.random() }))
            .sort((a, b) => a.sort - b.sort)
            .map(({ value }) => value);

        const openLightbox = ({ src, name }) => {
            lightboxImg.src = src;
            lightboxImg.alt = name;
            lightboxCaption.textContent = name;
            lightboxEl.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        };

        const closeLightbox = () => {
            lightboxEl.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            lightboxImg.src = '';
        };

        const renderGallery = (photos) => {
            galleryEl.innerHTML = '';
            const fragment = document.createDocumentFragment();

            photos.forEach(({ src, name }) => {
                const card = document.createElement('button');
                card.type = 'button';
                card.className = 'photo-card group block w-full text-left rounded-2xl overflow-hidden bg-white border border-slate-200 shadow-md shadow-slate-200 transition hover:-translate-y-1 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/70';

                card.innerHTML = `
                    <div class="relative">
                        <img src="${src}" alt="${name}" loading="lazy" class="w-full h-auto transition duration-500 group-hover:scale-[1.02]">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/40 via-slate-900/5 to-transparent opacity-0 group-hover:opacity-100 transition duration-300"></div>
                        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between text-white text-xs font-semibold opacity-0 group-hover:opacity-100 transition">
                            <span class="truncate">${name}</span>
                            <span class="inline-flex items-center gap-1 px-2 py-1 bg-white/20 rounded-full backdrop-blur-sm"><i class="fas fa-up-right-from-square text-[10px]"></i> Open</span>
                        </div>
                    </div>
                `;

                card.addEventListener('click', () => openLightbox({ src, name }));
                fragment.appendChild(card);
            });

            galleryEl.appendChild(fragment);
            galleryEl.classList.remove('hidden');
            statusEl.classList.add('hidden');
            errorEl.classList.add('hidden');
            photoCountEl.textContent = photos.length;
        };

        const showMessage = (text, isError = false) => {
            statusEl.classList.add('hidden');
            errorEl.textContent = text;
            errorEl.classList.toggle('hidden', !isError);
            if (!isError) {
                errorEl.classList.remove('bg-amber-50', 'border-amber-200', 'text-amber-700');
            }
        };

        const loadPhotos = async () => {
            statusEl.classList.remove('hidden');
            statusEl.querySelector('span').textContent = 'Loading photos...';
            galleryEl.classList.add('hidden');
            errorEl.classList.add('hidden');

            try {
                const response = await fetch(apiUrl, { headers: { 'Accept': 'application/vnd.github.v3+json' } });

                if (response.status === 404) {
                    showMessage('No /photos folder found yet. Create one in the repo root and add images; they will appear here automatically.', true);
                    photoCountEl.textContent = '0';
                    return;
                }

                if (!response.ok) {
                    throw new Error('Unable to reach the GitHub API. Try again shortly.');
                }

                const data = await response.json();
                const photos = (data || [])
                    .filter(item => item.type === 'file' && isImage(item.name))
                    .map(item => ({ src: item.download_url, name: item.name }));

                if (!photos.length) {
                    showMessage('The /photos folder is empty. Add JPG/PNG/GIF/WEBP/AVIF images to see them here.', true);
                    photoCountEl.textContent = '0';
                    return;
                }

                photoCache = photos;
                renderGallery(shuffle([...photoCache]));
            } catch (error) {
                showMessage(error.message || 'Something went wrong while loading photos.', true);
                photoCountEl.textContent = '0';
            }
        };

        shuffleButton.addEventListener('click', () => {
            if (!photoCache.length) return;
            renderGallery(shuffle([...photoCache]));
        });

        lightboxEl.addEventListener('click', (event) => {
            if (event.target === lightboxEl || event.target.dataset.close === 'true') {
                closeLightbox();
            }
        });

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && !lightboxEl.classList.contains('hidden')) {
                closeLightbox();
            }
        });

        loadPhotos();
    </script>
</body>
</html>
